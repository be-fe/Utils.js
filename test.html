<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Util.js测试</title>
    <script src="./server/public/build/Utils.js"></script>
</head>
<body>

注意,测试的前提是确保构建的代码包中包含测试的模块!

<script>


    //    console.log(Utils);
    //    console.log(Utils.arrayEqual([1,3,3], [1,2,3]));

    // promise demo


    var getJSON = function (url) {

        var promise = new Promise(function (resolve, reject) {

            var client = new XMLHttpRequest();
            client.open("GET", url);
            client.onreadystatechange = handler;
            client.responseType = "json";
            client.setRequestHeader("Accept", "application/json");
            client.send();

            function handler() {
                if (this.readyState !== 4) {
                    return;
                }
                if (this.status === 200) {
                    resolve(this.response);
                } else {
                    reject(new Error(this.statusText));
                }
            };

        });

        return promise;
    };

    getJSON("/posts.json").then(function (json) {

        console.log('Contents: ' + json);

    }, function (error) {

        console.error('出错了', error);

    });


</script>

</body>
</html>