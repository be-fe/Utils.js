<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Util.js测试</title>
    <script src="./../../server/public/build/Utils.js"></script>
</head>
<body>

注意,测试的前提是确保构建的代码包中包含测试的模块!


<script>

    var blogger = {
        recommend: function (id) {
            var msg = 'dudu 推荐了的帖子:' + id;
            this.publish(msg);
        }
    };

    var user = {
        vote: function (id) {
            var msg = '有人投票了!ID=' + id;
            this.publish(msg);
        }
    };

    Utils.Observer.make(blogger);
    Utils.Observer.make(user);

    var tom = {
        read: function (what) {
            console.log('Tom看到了如下信息：' + what)
        }
    };

    var mm = {
        show: function (what) {
            console.log('mm看到了如下信息：' + what)
        }
    };
    // 订阅
    blogger.addSubscriber(tom.read);
    blogger.addSubscriber(mm.show);
    blogger.recommend(123); //调用发布

    //退订
    blogger.removeSubscriber(mm.show);
    blogger.recommend(456); //调用发布

    //另外一个对象的订阅
    user.addSubscriber(mm.show);
    user.vote(789); //调用发布

</script>

</body>
</html>